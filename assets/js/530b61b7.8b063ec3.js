"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[9274],{31446:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>o,metadata:()=>r,toc:()=>d});var t=i(85893),s=i(11151);const o={title:"Jan is Not Using GPU",keywords:["Jan AI","Jan","ChatGPT alternative","local AI","private AI","convZ ersational AI","no-subscription fee","large language model","troubleshooting"]},a=void 0,r={id:"guides/troubleshooting/gpu-not-used",title:"Jan is Not Using GPU",description:"Requirements for running Jan App in GPU mode on Windows and Linux",source:"@site/docs/guides/07-troubleshooting/03-gpu-not-used.mdx",sourceDirName:"guides/07-troubleshooting",slug:"/guides/troubleshooting/gpu-not-used",permalink:"/guides/troubleshooting/gpu-not-used",draft:!1,unlisted:!1,editUrl:"https://github.com/janhq/jan/tree/main/docs/docs/guides/07-troubleshooting/03-gpu-not-used.mdx",tags:[],version:"current",lastUpdatedBy:"hiento09",lastUpdatedAt:1704513258,formattedLastUpdatedAt:"Jan 6, 2024",sidebarPosition:3,frontMatter:{title:"Jan is Not Using GPU",keywords:["Jan AI","Jan","ChatGPT alternative","local AI","private AI","convZ ersational AI","no-subscription fee","large language model","troubleshooting"]},sidebar:"guidesSidebar",previous:{title:"Failed to Fetch",permalink:"/troubleshooting/failed-to-fetch"}},l={},d=[{value:"Requirements for running Jan App in GPU mode on Windows and Linux",id:"requirements-for-running-jan-app-in-gpu-mode-on-windows-and-linux",level:2},{value:"How to switch mode CPU/GPU Jan app",id:"how-to-switch-mode-cpugpu-jan-app",level:2},{value:"To check the current GPU-related settings that Jan app has detected, you can go to the Settings/Advanced section as shown in the image below.",id:"to-check-the-current-gpu-related-settings-that-jan-app-has-detected-you-can-go-to-the-settingsadvanced-section-as-shown-in-the-image-below",level:2},{value:"Tested on",id:"tested-on",level:2},{value:"If you are experiencing this issue",id:"if-you-are-experiencing-this-issue",level:2}];function c(e){const n={a:"a",code:"code",h2:"h2",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,s.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h2,{id:"requirements-for-running-jan-app-in-gpu-mode-on-windows-and-linux",children:"Requirements for running Jan App in GPU mode on Windows and Linux"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["You must have an NVIDIA driver that supports CUDA 11.4 or higher. Refer ",(0,t.jsx)(n.a,{href:"https://docs.nvidia.com/deploy/cuda-compatibility/index.html#binary-compatibility__table-toolkit-driver",children:"here"}),".\nTo check if the NVIDIA driver is installed, open PowerShell or Terminal and enter the following command:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"nvidia-smi\n"})}),"\n",(0,t.jsx)(n.p,{children:"If you see a result similar to the following, you have successfully installed the NVIDIA driver:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"+-----------------------------------------------------------------------------+\n| NVIDIA-SMI 470.57.02    Driver Version: 470.57.02    CUDA Version: 11.4     |\n|-------------------------------+----------------------+----------------------+\n| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |\n| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |\n|                               |                      |               MIG M. |\n|===============================+======================+======================|\n|   0  NVIDIA GeForce ...  Off  | 00000000:01:00.0  On |                  N/A |\n|  0%   51C    P8    10W / 170W |    364MiB /  7982MiB |      0%      Default |\n|                               |                      |                  N/A |\n+-------------------------------+----------------------+----------------------+\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["You must have CUDA 11.4 or higher (refer ",(0,t.jsx)(n.a,{href:"https://developer.nvidia.com/cuda-toolkit-archive",children:"here"}),").\nTo check if CUDA is installed, open PowerShell or Terminal and enter the following command:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"nvcc --version\n"})}),"\n",(0,t.jsx)(n.p,{children:"If you see a result similar to the following, you have successfully installed CUDA:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"nvcc: NVIDIA (R) Cuda compiler driver\n\nCuda compilation tools, release 11.4, V11.4.100\nBuild cuda_11.4.r11.4/compiler.30033411_0\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Specifically for Linux:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["you must have ",(0,t.jsx)(n.code,{children:"gcc-11"}),", ",(0,t.jsx)(n.code,{children:"g++-11"}),", ",(0,t.jsx)(n.code,{children:"cpp-11"})," or higher, refer ",(0,t.jsx)(n.a,{href:"https://gcc.gnu.org/projects/cxx-status.html#cxx17",children:"here"}),". For Ubuntu, you can install g++ 11 by following the instructions ",(0,t.jsx)(n.a,{href:"https://linuxconfig.org/how-to-switch-between-multiple-gcc-and-g-compiler-versions-on-ubuntu-20-04-lts-focal-fossa",children:"here"}),".","\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Example for ubuntu\n# Add the following PPA repository\nsudo add-apt-repository ppa:ubuntu-toolchain-r/test\n# Update the package list\nsudo apt update\n# Install g++ 11\nsudo apt-get install -y gcc-11 g++-11 cpp-11\n\n# Update the default g++ version\nsudo update-alternatives --install /usr/bin/gcc gcc /usr/bin/gcc-11 110 \\\n                     --slave /usr/bin/g++ g++ /usr/bin/g++-11 \\\n                     --slave /usr/bin/gcov gcov /usr/bin/gcov-11 \\\n                     --slave /usr/bin/gcc-ar gcc-ar /usr/bin/gcc-ar-11 \\\n                     --slave /usr/bin/gcc-ranlib gcc-ranlib /usr/bin/gcc-ranlib-11\nsudo update-alternatives --install /usr/bin/cpp cpp /usr/bin/cpp-11 110\n# Check the default g++ version\ng++ --version\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["You must add the ",(0,t.jsx)(n.code,{children:".so"})," libraries of CUDA to the ",(0,t.jsx)(n.code,{children:"LD_LIBRARY_PATH"})," environment variable, refer ",(0,t.jsx)(n.a,{href:"https://docs.nvidia.com/cuda/cuda-installation-guide-linux/index.html#post-installation-actions",children:"here"}),".","\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Example for ubuntu with CUDA 11.4\nsudo nano /etc/environment\n# Add /usr/local/cuda-11.4/bin to the PATH environment variable - the first line\n# Add the following line to the end of the file\nLD_LIBRARY_PATH=/usr/local/cuda-11.4/lib64\n\n# Save and exit\n# Restart your computer or log out and log in again, the changes will take effect\n"})}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"how-to-switch-mode-cpugpu-jan-app",children:"How to switch mode CPU/GPU Jan app"}),"\n",(0,t.jsxs)(n.p,{children:["By default, Jan app will run in CPU mode. When starting Jan app, the program will automatically check if your computer meets the requirements to run in GPU mode. If it does, we will automatically enable GPU mode and pick the GPU has highest VGRAM for you (feature allowing users to select one or more GPU devices for use - currently in planning). You can check whether you are using CPU mode or GPU mode in the settings/advance section of Jan app. (see image below). ",(0,t.jsx)(n.img,{src:i(27756).Z+"",width:"1488",height:"854"})]}),"\n",(0,t.jsx)(n.p,{children:"If you have GPU mode but it is not enabled by default, the following possibilities may exist, you can follow the next steps to fix the error:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["You have not installed the NVIDIA driver, refer to the NVIDIA driver that supports CUDA 11.4 ",(0,t.jsx)(n.a,{href:"https://docs.nvidia.com/deploy/cuda-compatibility/index.html#binary-compatibility__table-toolkit-driver",children:"here"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["You have not installed the CUDA toolkit or your CUDA toolkit is not compatible with the NVIDIA driver, refer to CUDA compatibility ",(0,t.jsx)(n.a,{href:"https://docs.nvidia.com/deploy/cuda-compatibility/index.html#binary-compatibility__table-toolkit-driver",children:"here"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["You have not installed a CUDA compatible driver, refer ",(0,t.jsx)(n.a,{href:"https://docs.nvidia.com/deploy/cuda-compatibility/index.html#binary-compatibility__table-toolkit-driver",children:"here"}),", and you must add the ",(0,t.jsx)(n.code,{children:".so"})," libraries of CUDA and the CUDA compatible driver to the ",(0,t.jsx)(n.code,{children:"LD_LIBRARY_PATH"})," environment variable, refer ",(0,t.jsx)(n.a,{href:"https://docs.nvidia.com/cuda/cuda-installation-guide-linux/index.html#post-installation-actions",children:"here"}),". For Windows, add the ",(0,t.jsx)(n.code,{children:".dll"})," libraries of CUDA and the CUDA compatible driver to the ",(0,t.jsx)(n.code,{children:"PATH"})," environment variable. Usually, when installing CUDA on Windows, this environment variable is automatically added, but if you do not see it, you can add it manually by referring ",(0,t.jsx)(n.a,{href:"https://docs.nvidia.com/cuda/cuda-installation-guide-microsoft-windows/index.html#environment-setup",children:"here"}),"."]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"to-check-the-current-gpu-related-settings-that-jan-app-has-detected-you-can-go-to-the-settingsadvanced-section-as-shown-in-the-image-below",children:"To check the current GPU-related settings that Jan app has detected, you can go to the Settings/Advanced section as shown in the image below."}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.img,{src:i(76386).Z+"",width:"1470",height:"841"}),"\n",(0,t.jsx)(n.img,{src:i(11827).Z+"",width:"1550",height:"844"}),"\n",(0,t.jsx)(n.img,{src:i(42302).Z+"",width:"1214",height:"376"}),"\n",(0,t.jsx)(n.img,{src:i(66165).Z+"",width:"930",height:"810"})]}),"\n",(0,t.jsxs)(n.p,{children:["When you have an issue with GPU mode, share the ",(0,t.jsx)(n.code,{children:"settings.json"})," with us will help us to solve the problem faster."]}),"\n",(0,t.jsx)(n.h2,{id:"tested-on",children:"Tested on"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Windows 11 Pro 64-bit, NVIDIA GeForce RTX 4070ti GPU, CUDA 12.2, NVIDIA driver 531.18 (Bare metal)"}),"\n",(0,t.jsx)(n.li,{children:"Ubuntu 22.04 LTS, NVIDIA GeForce RTX 4070ti GPU, CUDA 12.2, NVIDIA driver 545 (Bare metal)"}),"\n",(0,t.jsx)(n.li,{children:"Ubuntu 18.04 LTS, NVIDIA GeForce GTX 1660ti GPU, CUDA 12.1, NVIDIA driver 535 (Proxmox VM passthrough GPU)"}),"\n",(0,t.jsx)(n.li,{children:"Ubuntu 20.04 LTS, NVIDIA GeForce GTX 1660ti GPU, CUDA 12.1, NVIDIA driver 535 (Proxmox VM passthrough GPU)"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"if-you-are-experiencing-this-issue",children:"If you are experiencing this issue"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["If the issue persists, please install the ",(0,t.jsx)(n.a,{href:"/install/nightly",children:"Nightly version"})," instead."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"If the issue persists, ensure your (V)RAM is accessible by the application. Some folks have virtual RAM and needs additional configuration."}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Get help in ",(0,t.jsx)(n.a,{href:"https://discord.gg/mY69SZaMaC",children:"Jan Discord"}),"."]}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,s.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},27756:(e,n,i)=>{i.d(n,{Z:()=>t});const t=i.p+"assets/images/jan-gpu-enable-setting-a15d040bb66482f134e00d361cddba8a.png"},76386:(e,n,i)=>{i.d(n,{Z:()=>t});const t=i.p+"assets/images/jan-open-home-directory-7b259ee38714840856ef743f457d800e.png"},11827:(e,n,i)=>{i.d(n,{Z:()=>t});const t=i.p+"assets/images/jan-open-settings-1-8d93f9682d7b32a66f408012ae37e2fc.png"},42302:(e,n,i)=>{i.d(n,{Z:()=>t});const t=i.p+"assets/images/jan-open-settings-2-250c4b0a6044925b0a905337170a488c.png"},66165:(e,n,i)=>{i.d(n,{Z:()=>t});const t=i.p+"assets/images/jan-open-settings-3-4202fc9432f1af150872948931c691df.png"},11151:(e,n,i)=>{i.d(n,{Z:()=>r,a:()=>a});var t=i(67294);const s={},o=t.createContext(s);function a(e){const n=t.useContext(o);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),t.createElement(o.Provider,{value:n},e.children)}}}]);